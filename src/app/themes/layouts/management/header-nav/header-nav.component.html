<!-- BEGIN: Header -->
<header id="m_header" class="m-grid__item m-header" m-minimize-offset="200" m-minimize-mobile-offset="200"
        appunwraptag="">
    <div class="m-container m-container--fluid m-container--full-height">
        <div class="m-stack m-stack--ver m-stack--desktop">

            <!-- BEGIN: Brand -->
            <div class="m-stack__item m-brand">
                <div class="m-stack m-stack--ver m-stack--general">
                    <div class="m-stack__item m-stack__item--middle m-brand__logo">
                        <a [routerLink]="['/management/dashboard']" class="m-brand__logo-wrapper">
                            <img class="logo-img" alt="ASCVN" [src]="photoUrl"/>
                        </a>
                    </div>
                    <div class="m-stack__item m-stack__item--middle m-brand__tools">
                        <a
                            href="javascript:;"
                            id="m_aside_left_offcanvas_toggle"
                            class="m-brand__icon m-brand__toggler m-brand__toggler--left m--visible-tablet-and-mobile-inline-block"
                        >
                            <span></span>
                        </a>
                        <a id="m_aside_header_menu_mobile_toggle" href="javascript:;" class="m-brand__icon m-brand__toggler m--visible-tablet-and-mobile-inline-block">
                            <span></span>
                        </a>
                        <a
                            id="m_aside_header_topbar_mobile_toggle"
                            href="javascript:;"
                            class="m-brand__icon m--visible-tablet-and-mobile-inline-block"
                        >
                            <i class="flaticon-more"></i>
                        </a>
                    </div>
                </div>
            </div>
            <!-- END: Brand -->
            <div class="m-stack__item m-stack__item--fluid m-header-head" id="m_header_nav_top">
                <button
                    class="m-aside-header-menu-mobile-close"
                    id="m_aside_header_menu_mobile_close_btn"
                >
                    <i class="la la-close"></i>
                </button>

                <ng-container *ngIf="isTopMenu">
                    <div id="m_header_menu"
                     class="m-header-menu m-aside-header-menu-mobile m-aside-header-menu-mobile--offcanvas">
                    <ul class="m-menu__nav  m-menu__nav--submenu-arrow ">
                        <ng-container *ngFor="let menu of listMenu; let i = index">
                            <li class="m-menu__item  m-menu__item--submenu m-menu__item--rel"
                                m-menu-submenu-toggle="hover">
                                <a href="javascript:;" class="m-menu__link m-menu__toggle">
                                    <!--                                <i class="m-menu__link-icon flaticon-add"></i>-->
                                    <span class="m-menu__link-text text-uppercase">
                                    {{ menu.title }}

                                </span>
                                <i class="m-menu__hor-arrow la la-angle-down"></i>
                                </a>
                                <div class="m-menu__submenu m-menu__submenu--classic m-menu__submenu--left">
                                    <span class="m-menu__arrow m-menu__arrow--adjust"></span>
                                    <ul class="m-menu__subnav">
                                        <ng-container
                                            *ngFor="let child of menu.subMenu; let j = index; trackBy: trackByFunction">
                                            <ng-container
                                                *ngIf="child.cssBadge && child.cssBadge === 'ONLY'; else haveSubMenu">
                                                <li class="m-menu__item " aria-haspopup="true">
                                                    <a (click)="changeUrlNodeCha(child.subMenu[0].link, child.title, i, j)"
                                                       class="m-menu__link ">
                                                        <div class="m-menu__link-icon">
                                                            <div [innerHTML]="child.css | vnuIcon | safeHtml: 'html'"></div>
                                                        </div>

                                                        <span class="m-menu__link-text">
                                                    {{ child.title }}
                                                </span>
                                                    </a>
                                                </li>
                                            </ng-container>
                                            <ng-template #haveSubMenu>
                                                <li class="m-menu__item  m-menu__item--submenu"
                                                    m-menu-submenu-toggle="hover" m-menu-link-redirect="1"
                                                    aria-haspopup="true">
                                                    <a href="javascript:;" class="m-menu__link m-menu__toggle">
                                                        <div class="m-menu__link-icon">
                                                            <div [innerHTML]="child.css | vnuIcon | safeHtml: 'html'"></div>
                                                        </div>

                                                        <span class="m-menu__link-text">
															{{ child.title }}
														</span>
                                                        <i class="m-menu__hor-arrow la la-angle-right"></i>
                                                    </a>
                                                    <div class="m-menu__submenu m-menu__submenu--classic m-menu__submenu--right">
                                                        <span class="m-menu__arrow "></span>
                                                        <ul class="m-menu__subnav">
                                                            <ng-container
                                                                *ngFor="let item of child.subMenu; let k = index; trackBy: trackByFunction">
                                                                <ng-container *ngIf="item.subMenu && item.subMenu.length > 0; else other_menu">
                                                                    <li class="m-menu__item m-menu__item--submenu" m-menu-submenu-toggle="hover" m-menu-link-redirect="1"
                                                                        aria-haspopup="true">
                                                                        <a href="javascript:;" class="m-menu__link m-menu__toggle">
                                                                            <!-- <div [innerHTML]="item.css | vnuIcon | safeHtml: 'html'"></div> -->
                                                                            <span class="m-menu__link-text">
                                                                                {{ item.title }}
                                                                            </span>
                                                                            <i class="m-menu__hor-arrow la la-angle-right"></i>
                                                                        </a>
                                                                        <div class="m-menu__submenu m-menu__submenu--classic m-menu__submenu--right">
                                                                            <span class="m-menu__arrow "></span>
                                                                            <ul class="m-menu__subnav">
                                                                                <ng-container *ngFor="let itemchild of item.subMenu; let y = index; trackBy: trackByFunction">
                                                                                    <li class="m-menu__item " m-menu-link-redirect="1"
                                                                                        aria-haspopup="true">
                                                                                        <a (click)="changeUrlsub(itemchild.link, itemchild.title, i, j, k, y)" class="m-menu__link ">
                                                                                            <span class="m-menu__link-text">
                                                                                                {{ itemchild.title }}
                                                                                            </span>
                                                                                        </a>

                                                                                    </li>
                                                                                </ng-container>
                                                                            </ul>
                                                                        </div>
                                                                    </li>
                                                                </ng-container>
                                                                <ng-template #other_menu>
                                                                    <li class="m-menu__item " m-menu-link-redirect="1"
                                                                        aria-haspopup="true">
                                                                        <a (click)="changeUrl(item.link, item.title, i, j, k)" class="m-menu__link ">
                                                                        <span class="m-menu__link-text">
                                                                            {{ item.title }}
                                                                        </span>
                                                                        </a>
                                                                    </li>
                                                                </ng-template>
                                                            </ng-container>
                                                        </ul>
                                                    </div>
                                                </li>
                                            </ng-template>
                                        </ng-container>
                                    </ul>
                                </div>
                            </li>
                        </ng-container>
                    </ul>
                </div>
                </ng-container>

                <div id="m_header_topbar" class="m-topbar m-stack m-stack--ver m-stack--general">
                    <div class="m-stack__item m-topbar__nav-wrapper">
                        <ul class="m-topbar__nav m-nav m-nav--inline">
                            <li
                                *ngIf="!isProduction"
                                class="m-nav__item m-dropdown m-dropdown--arrow m-dropdown--align-center m-dropdown--small m-dropdown--mobile-full-width languages"
                                m-dropdown-toggle="click"
                            >
                                <a href="javascript:void(0)" class="m-nav__link m-dropdown__toggle">
                                    <span class="m-nav__link-icon">
                                        <img [src]="flagImage" alt="" class="w-100"/>
                                    </span>
                                </a>
                                <div class="m-dropdown__wrapper">
                                    <span class="m-dropdown__arrow m-dropdown__arrow--center"></span>
                                    <div class="m-dropdown__inner">
                                        <div class="m-dropdown__body p-0">
                                            <div class="m-dropdown__content">
                                                <ul class="list-unstyled">
                                                    <li class="item">
                                                        <a (click)="setLang('vi')" class="item-link">
                                                            <span class="symbol mr-3">
                                                                <img src="/assets/images/Flag_vietnam.png" alt=""/>
                                                            </span>
                                                            <span class="text">{{ 'LANG.VI' | translate }}</span>
                                                        </a>
                                                    </li>
                                                    <li class="item">
                                                        <a (click)="setLang('en')" class="item-link">
                                                            <span class="symbol mr-3">
                                                                <img src="/assets/images/Flag_kingdom.png" alt=""/>
                                                            </span>
                                                            <span class="text">{{ 'LANG.EN' | translate }}</span>
                                                        </a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li
                                class="m-nav__item m-topbar__user-profile m-topbar__user-profile--img m-dropdown m-dropdown--medium m-dropdown--arrow m-dropdown--header-bg-fill m-dropdown--align-right m-dropdown--mobile-full-width"
                                nz-dropdown
                                nzTrigger="click"
                                [nzDropdownMenu]="menuUserInfo"
                            >
                                <a href="javascript:void(0)" class="m-nav__link m-dropdown__toggle">
                                    <span class="m-topbar__userpic" *ngIf="user">
                                        Chào, {{ user.firstName + ' ' + user.lastName }} <i
                                        class="fa fa-angle-down align-middle ml-1"></i
                                    ></span>
                                </a>
                                <nz-dropdown-menu #menuUserInfo="nzDropdownMenu">
                                    <div class="m-dropdown__wrapper profile_user" nz-menu *ngIf="user">
                                        <div class="m-dropdown__inner">
                                            <div class="m-dropdown__body">
                                                <div class="m-dropdown__content">
                                                    <div class="d-flex align-items-center">
                                                        <div class="symbol symbol-100 mr-3">
                                                            <div
                                                                class="symbol-label"
                                                                [style]="'background-image: url(' + avatarUrl + ')'"
                                                            ></div>
                                                            <i class="symbol-badge bg-success"></i>
                                                            <label
                                                                class="btn-circle"
                                                                data-action="change"
                                                                title=""
                                                                (click)="createModalUpdateAvatar()"
                                                            >
                                                                <i class="fa fa-pencil"></i>
                                                            </label>
                                                        </div>
                                                        <div class="d-flex flex-column">
                                                            <a href="javascript:void(0)" class="profile_user_name">{{
                                                                user.firstName + ' ' + user.lastName
                                                                }}</a>

                                                            <div class="navi mt-2">
                                                                <a href="javascript:void(0)"
                                                                   class="navi-item mb-2 d-block">
                                                                    <span class="navi-link">
                                                                        <span
                                                                            class="navi-text text-muted">{{ user.email }}</span>
                                                                    </span>
                                                                </a>
                                                                <a (click)="onLogout()" href="javascript:void(0)"
                                                                   class="btn_custom">{{
                                                                    'LB.LOGOUT' | translate
                                                                    }}</a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="separator separator-dashed my-3"></div>

                                                    <ul class="m-nav">
                                                        <ng-container *ngIf="hasAccessProfile">
                                                            <li class="m-nav__item">
                                                                <a (click)="showLinkProfile()" class="m-nav__link">
                                                                    <i class="m-nav__link-icon fa fa-user-circle"></i>
                                                                    <span class="m-nav__link-title">
                                                                        <span class="m-nav__link-wrap">
                                                                            <span class="m-nav__link-text">
                                                                                {{ 'LB.PROFILE' | translate }}
                                                                            </span>
                                                                        </span>
                                                                    </span>
                                                                </a>
                                                            </li>
                                                        </ng-container>
                                                        <li class="m-nav__item">
                                                            <a (click)="createModalChangePassword()"
                                                               class="m-nav__link">
                                                                <i class="m-nav__link-icon fa fa-key"></i>
                                                                <span class="m-nav__link-title">
                                                                    <span class="m-nav__link-wrap">
                                                                        <span
                                                                            class="m-nav__link-text"> Đổi mật khẩu </span>
                                                                    </span>
                                                                </span>
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </nz-dropdown-menu>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
